@model YemekTarifleri.DTOs.RecipeUpdateDto

@{
    ViewData["Title"] = "Tarifi DÃ¼zenle";
}

<div class="max-w-3xl mx-auto">
    <!-- BaÅŸlÄ±k -->
    <div class="mb-6">
        <h1 class="text-3xl font-bold text-gray-900">âœï¸ Tarifi DÃ¼zenle</h1>
        <p class="text-gray-600 mt-1">Tarif bilgilerini gÃ¼ncelleyin</p>
    </div>

    <!-- Form -->
    <form method="post" enctype="multipart/form-data" class="bg-white rounded-lg shadow-md p-6 space-y-6">
        @if (!ViewData.ModelState.IsValid)
        {
            <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                <p class="text-red-800 font-semibold mb-2">Form iÃ§inde hata var:</p>
                <ul class="list-disc list-inside space-y-1">
                    @foreach (var modelState in ViewData.ModelState.Values)
                    {
                        @foreach (var error in modelState.Errors)
                        {
                            <li class="text-red-700 text-sm">@error.ErrorMessage</li>
                        }
                    }
                </ul>
            </div>
        }

        <input type="hidden" asp-for="Id" />

        <div asp-validation-summary="ModelOnly" class="bg-red-50 border border-red-200 rounded-lg p-4 hidden"></div>

        <!-- Tarif AdÄ± -->
        <div>
            <label asp-for="Ad" class="block text-sm font-semibold text-gray-700 mb-2">Tarif AdÄ± *</label>
            <input asp-for="Ad" type="text" placeholder="Ã¶rn: Kuru Fasulye Å."
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent" />
            <span asp-validation-for="Ad" class="text-red-600 text-sm mt-1"></span>
        </div>

        <!-- AÃ§Ä±klama -->
        <div>
            <label asp-for="Aciklama" class="block text-sm font-semibold text-gray-700 mb-2">AÃ§Ä±klama / Ã–zet</label>
            <textarea asp-for="Aciklama" rows="3" placeholder="Tarif hakkÄ±nda kÄ±sa bir aÃ§Ä±klama..."
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent resize-none"></textarea>
            <span asp-validation-for="Aciklama" class="text-red-600 text-sm mt-1"></span>
        </div>

        <!-- Malzemeler -->
        <div>
            <label asp-for="Malzemeler" class="block text-sm font-semibold text-gray-700 mb-2">Malzemeler *</label>
            <textarea asp-for="Malzemeler" rows="5" placeholder="Her malzemeyi yeni satÄ±rda yazÄ±n&#10;Ã¶rn:&#10;- 2 bardak un&#10;- 1 yumurta&#10;- 1 Ã§ay kaÅŸÄ±ÄŸÄ± tuz"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent resize-vertical font-mono text-sm"></textarea>
            <span asp-validation-for="Malzemeler" class="text-red-600 text-sm mt-1"></span>
            <p class="text-gray-500 text-sm mt-1">ğŸ’¡ TÃ¼m malzemeleri detaylÄ± bir ÅŸekilde yazÄ±n (Ã¶rn: miktarlar, Ã¶lÃ§Ã¼ler)</p>
        </div>

        <!-- YapÄ±lÄ±ÅŸ -->
        <div>
            <label asp-for="Yapilis" class="block text-sm font-semibold text-gray-700 mb-2">YapÄ±lÄ±ÅŸ AdÄ±mlarÄ± *</label>
            <textarea asp-for="Yapilis" rows="5" placeholder="Her adÄ±mÄ± numaralandÄ±rarak yazÄ±n&#10;Ã¶rn:&#10;1. Malzemeleri hazÄ±rlayÄ±n&#10;2. KarÄ±ÅŸtÄ±rÄ±p mayalandÄ±rÄ±n&#10;3. FÄ±rÄ±nda piÅŸirin"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent resize-vertical font-mono text-sm"></textarea>
            <span asp-validation-for="Yapilis" class="text-red-600 text-sm mt-1"></span>
            <p class="text-gray-500 text-sm mt-1">ğŸ’¡ Her adÄ±mÄ± aÃ§Ä±k ve anlaÅŸÄ±lÄ±r bir ÅŸekilde yazÄ±n</p>
        </div>

        <!-- Kategori -->
        <div>
            <label asp-for="Kategori" class="block text-sm font-semibold text-gray-700 mb-2">Kategori *</label>
            <select asp-for="Kategori" asp-items="@new SelectList(ViewBag.Kategoriler)"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent">
                <option value="">-- Kategori SeÃ§in --</option>
            </select>
            <span asp-validation-for="Kategori" class="text-red-600 text-sm mt-1"></span>
        </div>

        <!-- Ä°ki SÃ¼tunlu Form AlanlarÄ± -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <!-- HazÄ±rlama SÃ¼resi -->
            <div>
                <label asp-for="HazirlamaSuresi" class="block text-sm font-semibold text-gray-700 mb-2">HazÄ±rlama SÃ¼resi (dakika)</label>
                <input asp-for="HazirlamaSuresi" type="number" placeholder="Ã¶rn: 30"
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent" />
                <span asp-validation-for="HazirlamaSuresi" class="text-red-600 text-sm mt-1"></span>
            </div>

            <!-- Zorluk Seviyesi -->
            <div>
                <label asp-for="ZorlukSeviyesi" class="block text-sm font-semibold text-gray-700 mb-2">Zorluk Seviyesi *</label>
                <select asp-for="ZorlukSeviyesi" asp-items="@new SelectList(ViewBag.ZorlukSeviyeleri)"
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent">
                    <option value="">-- SeÃ§in --</option>
                </select>
                <span asp-validation-for="ZorlukSeviyesi" class="text-red-600 text-sm mt-1"></span>
            </div>
        </div>

        <!-- Mevcut GÃ¶rsel -->
        @if (!string.IsNullOrEmpty(Model.ImagePath))
        {
            <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2">Mevcut GÃ¶rsel</label>
                <div class="bg-gray-50 rounded-lg p-4 flex items-center gap-4">
                    <img src="@Model.ImagePath" alt="@Model.Ad" class="w-24 h-24 object-cover rounded" />
                    <div>
                        <p class="text-gray-700 font-medium">Resim yÃ¼klÃ¼</p>
                        <p class="text-gray-500 text-sm">Yeni bir resim yÃ¼kleyerek deÄŸiÅŸtirebilirsiniz</p>
                    </div>
                </div>
            </div>
        }

        <!-- Yeni GÃ¶rsel YÃ¼kleme -->
        <div>
            <label for="imageFile" class="block text-sm font-semibold text-gray-700 mb-2">Tarif GÃ¶rseli (DeÄŸiÅŸtirmek Ä°Ã§in YÃ¼kleyin)</label>
            <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-emerald-500 transition-colors"
                onclick="document.getElementById('imageFile').click()">
                <div class="text-gray-600">
                    <p class="text-lg">ğŸ–¼ï¸</p>
                    <p class="font-medium">Resim yÃ¼klemek iÃ§in tÄ±klayÄ±n</p>
                    <p class="text-sm text-gray-500">veya sÃ¼rÃ¼kleyip bÄ±rakÄ±n</p>
                </div>
                <input type="file" id="imageFile" name="imageFile" accept="image/*" class="hidden" />
            </div>
            <p class="text-gray-500 text-sm mt-2">ğŸ“ Desteklenen formatlar: JPG, PNG, GIF (Max: 5MB)</p>
        </div>

        <!-- Butonlar -->
        <div class="flex gap-4 pt-4 border-t border-gray-200">
            <button type="submit" class="bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-2 rounded-lg font-semibold transition-colors">
                âœ… DeÄŸiÅŸiklikleri Kaydet
            </button>
            <a asp-action="Recipes" class="bg-gray-400 hover:bg-gray-500 text-white px-6 py-2 rounded-lg font-semibold transition-colors">
                âŒ Ä°ptal
            </a>
        </div>
    </form>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
